(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addressbook-level-address-book"],{"2df2":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"cu-bar fixed",class:[t.NavBarColor],style:t.style},[i("v-uni-view",{staticClass:"cuIcon-back margin-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backRoute()}}},[i("v-uni-text",{staticClass:"margin-left-sm"},[t._v("返回")])],1),i("v-uni-view",{staticClass:"content",style:[{top:t.StatusBar+"px"}]},[t._v("通讯录")])],1),i("v-uni-view",{staticClass:"bg-gray text-gray padding",style:[{marginTop:t.CustomBar+"px"}]},[t._v(t._s(t.levelTitle))]),i("v-uni-view",{staticClass:"cu-list menu sm-border"},[t._l(t.comList,(function(e,a){return i("v-uni-view",{key:e.key,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goMember(e)}}},[i("v-uni-image",{staticClass:"line2-icon",attrs:{src:"/static/folder.png"}}),i("v-uni-view",{staticClass:"content margin-left-sm"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.title))])],1)],1)})),t._l(t.childrenUserList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goMemberInfo(e)}}},[i("v-uni-view",{staticClass:"cu-avatar round lx",style:[{backgroundImage:"url("+e.avatar+")"}]}),i("v-uni-view",{staticClass:"content margin-left-sm"},[i("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.realname))])],1)],1)}))],2)],1)},s=[]},"6a00":function(t,e,i){"use strict";(function(t){i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("9b1b")),r=a(i("3471"));i("c223"),i("5c47"),i("a1c1"),i("45da"),i("aa9c");var n=i("0b94"),l={name:"level-address-book",data:function(){return{CustomBar:this.CustomBar,StatusBar:this.StatusBar,NavBarColor:this.NavBarColor,value:"",derpartment:"通讯录",comList:[],childrenUserList:[],metaList:[],depart2Url:"/sys/sysDepart/queryTreeList",queryTreeByKeyWord:"/sys/sysDepart/queryTreeByKeyWord",queryUserByDid:"/sys/user/appQueryByDepartId",level:0,titleArray:[],parentId:""}},computed:{levelTitle:function(){return this.titleArray&&this.titleArray.length>0?this.titleArray.join(" > "):(t.log("this.titleArray",this.titleArray),"企业通讯录")},style:function(){var t=this.StatusBar,e=this.CustomBar,i="height:".concat(e,"px;padding-top:").concat(t,"px;");return i}},onLoad:function(){t.log("this.CustomBar",this.CustomBar),this.loadList()},methods:{backRoute:function(){t.log("this.level",this.level),t.log("this.parentId",this.parentId),0==this.level?this.$Router.replaceAll({name:"index"}):(this.getCyclePnode(this.metaList,""),this.titleArray.pop(),this.level--)},onRefresh:function(){this.comList=[],this.childrenUserList=[],this.titleArray=[],this.loadList()},loadList:function(){var e=this;if(t.log("loadList==>$Route",this.$Route),this.$Route.query.level){var i=this.$Route.query;return this.level=i.level,this.comList=i.comList,this.metaList=i.metaList,this.childrenUserList=i.childrenUserList,this.derpartment=i.derpartment,this.parentId=i.parentId,void(this.titleArray=i.titleArray)}this.$http.get(this.queryTreeByKeyWord).then((function(i){if(t.log("部门通讯树：：",i),i.data.success&&(t.log("部门：：",i.data.result.departList),i.data.result.departList&&i.data.result.departList.length>0)){var a,s=(0,r.default)(i.data.result.departList);try{for(s.s();!(a=s.n()).done;){var n=a.value;t.log("item::",n),e.comList.push(n),e.metaList.push(n)}}catch(l){s.e(l)}finally{s.f()}e.derpartment=e.comList[0].title}})).catch((function(e){t.log("queryTreeByKeyWord 请求错误",e)}))},getUser:function(t,e){var i=this;this.$http.get(this.queryUserByDid,{params:{departId:t}}).then((function(t){i.childrenUserList=t.data.result;var a,s=(0,r.default)(i.childrenUserList);try{for(s.s();!(a=s.n()).done;){var n=a.value;n.departName=e,i.avatarHandler(n)}}catch(l){s.e(l)}finally{s.f()}}))},avatarHandler:function(t){var e=t.avatar;if(e){var i=(0,n.getFileAccessHttpUrl)(e);t.avatar=i}else"2"==t.sex?t.avatar="https://static.jeecg.com/upload/test/avatar_girl_1595818025488.png":t.avatar="https://static.jeecg.com/upload/test/avatar_boy_1595818012577.png"},goMember:function(e){var i=(0,s.default)({},e);if(i.children&&i.children.length>0){this.level++,this.comList=[],this.childrenUserList=[];var a,n=(0,r.default)(i.children);try{for(n.s();!(a=n.n()).done;){var l=a.value;this.comList.push(l)}}catch(o){n.e(o)}finally{n.f()}this.getUser(i.id,i.title),this.titleArray.push(i.title),this.parentId=i.id,this.derpartment=i.title}else t.log("params==>toMember",i),i.level=this.level,i.comList=this.comList,i.metaList=this.metaList,i.childrenUserList=this.childrenUserList,i.derpartment=this.derpartment,i.parentId=this.parentId,i.titleArray=this.titleArray,this.$Router.push({name:"member",params:i})},getCyclePnode:function(t,e){var i,a=(0,r.default)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.id==this.parentId){this.comList=t,this.childrenUserList=[],this.derpartment=this.comList[0].title,this.parentId=e,this.getUser(this.parentId,s.title);break}s.children&&s.children.length>0&&this.getCyclePnode(s.children,s.id)}}catch(n){a.e(n)}finally{a.f()}},goMemberInfo:function(e){t.log("item",e);var i=(0,s.default)({},e);t.log("parmas",i),i.page="levelAddressBook",this.$Router.push({name:"addressDetail",params:i})}}};e.default=l}).call(this,i("ba7c")["default"])},"7d43":function(t,e,i){"use strict";i.r(e);var a=i("6a00"),s=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=s.a},"8cedc":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".line2-icon[data-v-449d351b]{width:25px;height:20px}",""]),t.exports=e},"94ef":function(t,e,i){"use strict";var a=i("df19"),s=i.n(a);s.a},"9bc5":function(t,e,i){"use strict";i.r(e);var a=i("2df2"),s=i("7d43");for(var r in s)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(r);i("94ef");var n=i("828b"),l=Object(n["a"])(s["default"],a["b"],a["c"],!1,null,"449d351b",null,!1,a["a"],void 0);e["default"]=l.exports},df19:function(t,e,i){var a=i("8cedc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("967d").default;s("5b1be31f",a,!0,{sourceMap:!1,shadowMode:!1})}}]);