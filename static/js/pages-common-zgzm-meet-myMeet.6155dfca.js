(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-zgzm-meet-myMeet"],{"0b75":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-0e9a429a]{min-height:100vh;background-color:#f5f7fb}.meeting-list[data-v-0e9a429a]{padding:16px}.section-title[data-v-0e9a429a]{font-size:18px;font-weight:700;color:#333;margin-bottom:16px}.date-group[data-v-0e9a429a]{margin-bottom:24px}.date-header[data-v-0e9a429a]{font-size:14px;color:#666;margin-bottom:8px}.meeting-card[data-v-0e9a429a]{background-color:#fff;border-radius:8px;padding:16px;margin-bottom:16px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.meeting-header[data-v-0e9a429a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.meeting-title-wrapper[data-v-0e9a429a]{display:flex;align-items:center;flex:1;margin-right:16px}.meeting-title[data-v-0e9a429a]{font-size:16px;font-weight:600;color:#333;max-width:70%}.meeting-status[data-v-0e9a429a]{padding:4px 8px;border-radius:4px;font-size:12px;margin-left:8px}.meeting-status.status-approved[data-v-0e9a429a]{background-color:#e6f7e6;color:#28a745}.meeting-status.status-rejected[data-v-0e9a429a]{background-color:#ffe6e6;color:#dc3545}.meeting-status.status-pending[data-v-0e9a429a]{background-color:#e6f0ff;color:#007bff}.meeting-status.status-cancelled[data-v-0e9a429a]{background-color:#f2f2f2;color:#6c757d}.meeting-status.status-expired[data-v-0e9a429a]{background-color:#f8f9fa;color:#60676c}.meeting-status.status-ongoing[data-v-0e9a429a]{background-color:#fff3e6;color:#f90}.meeting-time[data-v-0e9a429a]{font-size:14px;color:#333;font-weight:500}.meeting-info[data-v-0e9a429a]{margin-bottom:12px}.meeting-location[data-v-0e9a429a],\r\n.meeting-attendees[data-v-0e9a429a]{font-size:14px;color:#666;margin-bottom:4px}.meeting-location .cuIcon-location[data-v-0e9a429a],\r\n.meeting-location .cuIcon-friend[data-v-0e9a429a],\r\n.meeting-attendees .cuIcon-location[data-v-0e9a429a],\r\n.meeting-attendees .cuIcon-friend[data-v-0e9a429a]{margin-right:4px}.meeting-actions[data-v-0e9a429a]{display:flex;justify-content:flex-end;gap:8px}.ellipsis[data-v-0e9a429a]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}',""]),t.exports=e},"189d":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("fab6")),r={name:"u-gap",mixins:[uni.$u.mpMixin,uni.$u.mixin,i.default],computed:{gapStyle:function(){var t={backgroundColor:this.bgColor,height:uni.$u.addUnit(this.height),marginTop:uni.$u.addUnit(this.marginTop),marginBottom:uni.$u.addUnit(this.marginBottom)};return uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}}};e.default=r},"3e0f":function(t,e,n){var a=n("0b75");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("724c991c",a,!0,{sourceMap:!1,shadowMode:!1})},"4abf":function(t,e,n){var a=n("540b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("3bfb6270",a,!0,{sourceMap:!1,shadowMode:!1})},"540b":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-3927d88e], uni-scroll-view[data-v-3927d88e], uni-swiper-item[data-v-3927d88e]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),t.exports=e},"65c7":function(t,e,n){"use strict";var a=n("4abf"),i=n.n(a);i.a},6839:function(t,e,n){"use strict";n.r(e);var a=n("6d11"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"6d11":function(t,e,n){"use strict";(function(t){n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5de6")),r=a(n("2634")),o=a(n("b7c7")),s=a(n("2fdc"));n("473f"),n("bf0f"),n("aa9c"),n("4100"),n("dc8a"),n("c223"),n("8f71");var u=n("a1ed"),c={data:function(){return{meetings:[],page:1,pageSize:10,loadMoreStatus:"loadmore",scrollViewHeight:0,totalMeetings:0}},computed:{title:function(){return this.$Route.query.title||"我的会议"},groupedMeetings:function(){var t=this.meetings.reduce((function(t,e){var n=e.appointmentDate.split(" ")[0];return t[n]||(t[n]=[]),t[n].push(e),t}),{});return Object.keys(t).sort((function(t,e){return new Date(e)-new Date(t)})).reduce((function(e,n){return e[n]=t[n],e}),{})}},onLoad:function(){this.getScreenHeight(),this.getMeetings()},methods:{getScreenHeight:function(){var t=this;uni.getSystemInfo({success:function(e){t.scrollViewHeight=e.windowHeight}})},getMeetings:function(){var e=this;return(0,s.default)((0,r.default)().mark((function n(){var a;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,u.getMettingList)(e.page,e.pageSize);case 3:a=n.sent,200===a.data.code&&a.data.result?(e.meetings=[].concat((0,o.default)(e.meetings),(0,o.default)(a.data.result.records)),e.totalMeetings=a.data.result.total,e.loadMoreStatus=e.meetings.length>=e.totalMeetings?"nomore":"loadmore"):e.loadMoreStatus="fail",n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error("Failed to fetch meetings:",n.t0),e.loadMoreStatus="fail";case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},loadMore:function(){"loadmore"===this.loadMoreStatus&&(this.page++,this.getMeetings())},formatDateString:function(t){var e=new Date,n=this.isSameDay(t,e),a=new Intl.DateTimeFormat("zh-CN",{weekday:"long"}).format(t),i="".concat(t.getMonth()+1,"/").concat(t.getDate()," ").concat(a);return n?"今天 ".concat(i):i},isSameDay:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},getMeetingStatus:function(t){var e=new Date,n=t.appointmentDate.split(" "),a=(0,i.default)(n,1),r=a[0],o=new Date("".concat(r,"T").concat(t.appointmentStartTime,":00")),s=new Date("".concat(r,"T").concat(t.appointmentEndTime,":00"));if(1===t.status&&e>=o&&e<=s)return"进行中";if(e>s)return"已过期";return{0:"待审核",1:"已通过",2:"未通过",4:"已取消"}[t.status]||"待审核"},getStatusClass:function(t){var e=this.getMeetingStatus(t);return{"待审核":"cu-tag bg-yellow","已通过":"cu-tag bg-green","未通过":"cu-tag bg-red","已取消":"cu-tag bg-grey","已过期":"status-expired","进行中":"status-ongoing"}[e]},goToMeetingDetail:function(t){uni.navigateTo({url:"/pages/common/zgzm/meet/meetingDetail?id=".concat(t)})},cancelMeeting:function(e){var n=this;uni.showModal({title:"提示",content:"确定取消会议吗？",success:function(){var a=(0,s.default)((0,r.default)().mark((function a(i){var o;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.confirm){a.next=12;break}return a.prev=1,a.next=4,(0,u.mettingAuditDelete)(e);case 4:o=a.sent,200===o.code?(n.$tip.toast(o.data.message),n.meetings=n.meetings.filter((function(t){return t.id!==e}))):n.$tip.toast(o.data.message),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),t.error("Failed to cancel meeting:",a.t0),n.$tip.toast("取消会议失败，请重试");case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(t){return a.apply(this,arguments)}}()})}}};e.default=c}).call(this,n("ba7c")["default"])},"7a7d":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-gap",style:[this.gapStyle]})},i=[]},a1ed:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.mettingAuditReject=e.mettingAuditPass=e.mettingAuditDelete=e.getMettingType=e.getMettingPeopleList=e.getMettingList=e.getMettingInfoList=e.getMettingInfoDetail=e.getMettingDetail=e.getMettingAuditList=e.getMettingAuditDetail=e.addMetting=void 0;var a=n("38cb");e.getMettingList=function(t,e){return a.http.request({url:"metting/mettingAppointments/listen",method:"GET",params:{pageNo:t,pageSize:e}})};e.getMettingInfoList=function(t,e){return a.http.request({url:"metting/mettingInfo/list",method:"GET",params:{column:"createTime",order:"desc",pageNo:t,pageSize:e}})};e.getMettingInfoDetail=function(t,e){return a.http.request({url:"metting/mettingAppointments/list",method:"GET",params:{mettingId:t,appointmentDate:e}})};e.getMettingDetail=function(t){return a.http.request({url:"metting/mettingAppointments/queryById",method:"GET",params:{id:t}})};e.getMettingType=function(){return a.http.request({url:"metting/mettingType/list",method:"GET"})};e.addMetting=function(t){return a.http.request({url:"metting/mettingAppointments/add",method:"POST",data:t})};e.getMettingPeopleList=function(t){return a.http.request({url:"/sys/user/appQueryByDepartId",method:"GET",params:t})};e.getMettingAuditList=function(t,e){return a.http.request({url:"metting/mettingAppointments/listre",method:"GET",params:{pageNo:t,pageSize:e}})};e.getMettingAuditDetail=function(t){return a.http.request({url:"metting/mettingAppointments/queryById",method:"GET",params:{id:t}})};e.mettingAuditPass=function(t){return a.http.request({url:"metting/mettingAppointments/reviewing",method:"post",params:{id:t}})};e.mettingAuditReject=function(t){return a.http.request({url:"metting/mettingAppointments/remark",method:"post",data:t})};e.mettingAuditDelete=function(t){return a.http.request({url:"metting/mettingAppointments/delete",method:"delete",params:{id:t}})}},ad63:function(t,e,n){"use strict";var a=n("3e0f"),i=n.n(a);i.a},bd77:function(t,e,n){"use strict";n.r(e);var a=n("c2f6"),i=n("6839");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("ad63");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"0e9a429a",null,!1,a["a"],void 0);e["default"]=s.exports},c2c9:function(t,e,n){"use strict";n.r(e);var a=n("7a7d"),i=n("e248");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("65c7");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"3927d88e",null,!1,a["a"],void 0);e["default"]=s.exports},c2f6:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uGap:n("c2c9").default,uButton:n("609d").default,uLoadmore:n("cbe8").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-scroll-view",{staticClass:"meeting-list",style:{height:t.scrollViewHeight+"px"},attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[n("cu-custom",{attrs:{bgColor:"bg-gradual-white",isBack:!0}},[n("template",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.title))])],2),n("u-gap",{attrs:{height:"2vw","bg-color":"#F5F7FB"}}),n("v-uni-view",{staticClass:"section"},[n("v-uni-view",{staticClass:"section-title"},[t._v("我的会议")]),t._l(t.groupedMeetings,(function(e,a){return[n("v-uni-view",{key:a,staticClass:"date-group"},[n("v-uni-view",{staticClass:"date-header"},[t._v(t._s(t.formatDateString(new Date(a))))]),t._l(e,(function(e){return n("v-uni-view",{key:e.id,staticClass:"meeting-card"},[n("v-uni-view",{staticClass:"meeting-header"},[n("v-uni-view",{staticClass:"meeting-title-wrapper"},[n("v-uni-view",{staticClass:"meeting-title ellipsis"},[t._v(t._s(e.reason))]),n("v-uni-view",{staticClass:"meeting-status",class:t.getStatusClass(e)},[t._v(t._s(t.getMeetingStatus(e)))])],1),n("v-uni-view",{staticClass:"meeting-time"},[t._v(t._s(e.appointmentStartTime)+" - "+t._s(e.appointmentEndTime))])],1),n("v-uni-view",{staticClass:"meeting-info"},[n("v-uni-view",{staticClass:"meeting-location"},[n("v-uni-text",{staticClass:"cuIcon-location"}),t._v(t._s(e.mettingId_dictText))],1),n("v-uni-view",{staticClass:"meeting-attendees ellipsis"},[n("v-uni-text",{staticClass:"cuIcon-friend"}),t._v(t._s(e.attendIds_dictText||"暂无人员"))],1)],1),n("v-uni-view",{staticClass:"meeting-actions",staticStyle:{display:"flex","justify-content":"end"}},["已过期"!==t.getMeetingStatus(e)&&"已取消"!==t.getMeetingStatus(e)?[n("u-button",{staticStyle:{width:"50%"},attrs:{size:"small",type:"info"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cancelMeeting(e.id)}}},[t._v("取消会议")])]:t._e(),n("u-button",{staticStyle:{width:"50%",margin:"0 !important","text-align":"end !important"},attrs:{size:"small",type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goToMeetingDetail(e.id)}}},[t._v("会议详情")])],2)],1)}))],2)]}))],2),n("u-loadmore",{attrs:{status:t.loadMoreStatus}})],1)],1)},r=[]},e248:function(t,e,n){"use strict";n.r(e);var a=n("189d"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},fab6:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa");var a={props:{bgColor:{type:String,default:uni.$u.props.gap.bgColor},height:{type:[String,Number],default:uni.$u.props.gap.height},marginTop:{type:[String,Number],default:uni.$u.props.gap.marginTop},marginBottom:{type:[String,Number],default:uni.$u.props.gap.marginBottom}}};e.default=a}}]);